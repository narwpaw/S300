###############################################################################
#                                                                             #
# IAR ARM ANSI C/C++ Compiler V5.10.5.372/W32           11/Sep/2013  19:44:40 #
# Copyright 1999-2007 IAR Systems. All rights reserved.                       #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  D:\Zeuron\Projekty\S300\S300-program v1.4 -              #
#                    12.06.2013\Framework\USART.c                             #
#    Command line =  "D:\Zeuron\Projekty\S300\S300-program v1.4 -             #
#                    12.06.2013\Framework\USART.c" -D AT91SAM7S256 -D         #
#                    AT91SAM7SEK -D iH -D _LCD_NEGATIV_OLD_ -D __ALARM -D     #
#                    __WIFI_MODULE -D _DEBUG_ -D S300iOld -D _ADMINISTRATOR_  #
#                    -lC "D:\Zeuron\Projekty\S300\S300-program v1.4 -         #
#                    12.06.2013\S300X (Old)\List\" --diag_suppress Pa082 -o   #
#                    "D:\Zeuron\Projekty\S300\S300-program v1.4 -             #
#                    12.06.2013\S300X (Old)\Obj\" --no_cse --no_unroll        #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian little --cpu ARM7TDMI   #
#                    -e --fpu None --dlib_config "C:\Program Files (x86)\IAR  #
#                    Systems\Embedded Workbench 5.0\ARM\INC\DLib_Config_Norma #
#                    l.h" -I "D:\Zeuron\Projekty\S300\S300-program v1.4 -     #
#                    12.06.2013\lib\AT91SAM7S256\" -I                         #
#                    "D:\Zeuron\Projekty\S300\S300-program v1.4 -             #
#                    12.06.2013\lib\AT91SAM7S64\" -I                          #
#                    "D:\Zeuron\Projekty\S300\S300-program v1.4 -             #
#                    12.06.2013\" -I "D:\Zeuron\Projekty\S300\S300-program    #
#                    v1.4 - 12.06.2013\cdc\" -I "D:\Zeuron\Projekty\S300\S300 #
#                    -program v1.4 - 12.06.2013\core\" -I                     #
#                    "D:\Zeuron\Projekty\S300\S300-program v1.4 -             #
#                    12.06.2013\startup\" -I "D:\Zeuron\Projekty\S300\S300-pr #
#                    ogram v1.4 - 12.06.2013\Framework\" -I                   #
#                    "D:\Zeuron\Projekty\S300\S300-program v1.4 -             #
#                    12.06.2013\Framework\Configuration\" -I "C:\Program      #
#                    Files (x86)\IAR Systems\Embedded Workbench               #
#                    5.0\ARM\INC\" --section .text=Debug.txt --interwork      #
#                    --cpu_mode thumb -Ol                                     #
#    List file    =  D:\Zeuron\Projekty\S300\S300-program v1.4 -              #
#                    12.06.2013\S300X (Old)\List\USART.lst                    #
#    Object file  =  D:\Zeuron\Projekty\S300\S300-program v1.4 -              #
#                    12.06.2013\S300X (Old)\Obj\USART.o                       #
#                                                                             #
#                                                                             #
###############################################################################

D:\Zeuron\Projekty\S300\S300-program v1.4 - 12.06.2013\Framework\USART.c
      1          //****************************************************************************//
      2          //*--------------------------------------------------------------------------*//
      3          //*                                 CEURON                                   *//
      4          //*--------------------------------------------------------------------------*//
      5          //*--------------------------------------------------------------------------*//
      6          //*  Nazwa pliku                  : USART.c                                  *//
      7          //*  Opis                         : G³ówny plik programu                     *//
      8          //*  Autor                        : Pawe³ Narwojsz                           *//
      9          //*  Data utrzorzenia             : 16.01.2008                               *//
     10          //*  Data ostatniej modyfikacji   : --.--.----                               *//
     11          //*--------------------------------------------------------------------------*//
     12          //*                                                                          *//
     13          //*--------------------------------------------------------------------------*//
     14          //* Rejestr zmian  (data - opis):                                            *//
     15          //*                                                                          *//
     16          //*                               Brak zmian                                 *//
     17          //*                                                                          *//
     18          //*__________________________________________________________________________*//
     19          //****************************************************************************//
     20          //****************************************************************************//
     21          
     22          
     23          
     24          //Zmienne konfiguracyjne -------------------------------------------------------     
     25          
     26              //US0----------------------

   \                                 In section .data, align 4
     27                int  g_US0_BAUDRATE             = 19200;                                   //prêdkoœæ transmisji US0
   \                     g_US0_BAUDRATE:
   \   00000000   004B0000           DC32 19200

   \                                 In section .data, align 4
     28                int  g_US0_Comm_TIMEOUT         = 12;                                      //(w ms) Czas oczekiwania na odpowiedŸ urz¹dzenia odpytywanego poprzez MODBUS
   \                     g_US0_Comm_TIMEOUT:
   \   00000000   0C000000           DC32 12

   \                                 In section .data, align 1
     29                char q_US0_Comm_Mode            = 3;
   \                     q_US0_Comm_Mode:
   \   00000000   03                 DC8 3
     30                
     31              //US1----------------------

   \                                 In section .data, align 4
     32                int g_US1_BAUDRATE             = 115200;                                   //prêdkoœæ transmisji US0
   \                     g_US1_BAUDRATE:
   \   00000000   00C20100           DC32 115200

   \                                 In section .data, align 4
     33                int g_US1_Comm_TIMEOUT         = 100;                                      //(w ms) Czas oczekiwania na odpowiedŸ urz¹dzenia odpytywanego poprzez MODBUS  
   \                     g_US1_Comm_TIMEOUT:
   \   00000000   64000000           DC32 100
     34          //___________________________Koniec zmiennych lokalnych________________________
     35          
     36          
     37          
     38          
     39          
     40          //------------------------------------------------------------------------------
     41          //      Includes
     42          //------------------------------------------------------------------------------
     43          
     44          
     45          #include "USART.h"

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork unsigned int AT91F_AIC_ConfigureIt(AT91PS_AIC, unsigned int, unsigned int, unsigned int, void (*)())
   \                     AT91F_AIC_ConfigureIt:
   \   00000000   F0B4               PUSH     {R4-R7}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   049D               LDR      R5,[SP, #+16]
   \   00000006   0420               MOVS     R0,#+4
   \   00000008   4843               MULS     R0,R1,R0
   \   0000000A   2018               ADDS     R0,R4,R0
   \   0000000C   8030               ADDS     R0,R0,#+128
   \   0000000E   0068               LDR      R0,[R0, #+0]
   \   00000010   0126               MOVS     R6,#+1
   \   00000012   8E40               LSLS     R6,R6,R1
   \   00000014   9227               MOVS     R7,#+146
   \   00000016   7F00               LSLS     R7,R7,#+1        ;; #+292
   \   00000018   E651               STR      R6,[R4, R7]
   \   0000001A   0427               MOVS     R7,#+4
   \   0000001C   4F43               MULS     R7,R1,R7
   \   0000001E   E719               ADDS     R7,R4,R7
   \   00000020   8037               ADDS     R7,R7,#+128
   \   00000022   3D60               STR      R5,[R7, #+0]
   \   00000024   0425               MOVS     R5,#+4
   \   00000026   6943               MULS     R1,R5,R1
   \   00000028   1A43               ORRS     R2,R2,R3
   \   0000002A   6250               STR      R2,[R4, R1]
   \   0000002C   9421               MOVS     R1,#+148
   \   0000002E   4900               LSLS     R1,R1,#+1        ;; #+296
   \   00000030   6650               STR      R6,[R4, R1]
   \   00000032   F0BC               POP      {R4-R7}
   \   00000034   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_AIC_EnableIt(AT91PS_AIC, unsigned int)
   \                     AT91F_AIC_EnableIt:
   \   00000000   9022               MOVS     R2,#+144
   \   00000002   5200               LSLS     R2,R2,#+1        ;; #+288
   \   00000004   0123               MOVS     R3,#+1
   \   00000006   8B40               LSLS     R3,R3,R1
   \   00000008   8350               STR      R3,[R0, R2]
   \   0000000A   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_SetNextRx(AT91PS_PDC, char *, unsigned int)
   \                     AT91F_PDC_SetNextRx:
   \   00000000   0161               STR      R1,[R0, #+16]
   \   00000002   4261               STR      R2,[R0, #+20]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_SetNextTx(AT91PS_PDC, char *, unsigned int)
   \                     AT91F_PDC_SetNextTx:
   \   00000000   8161               STR      R1,[R0, #+24]
   \   00000002   C261               STR      R2,[R0, #+28]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_SetRx(AT91PS_PDC, char *, unsigned int)
   \                     AT91F_PDC_SetRx:
   \   00000000   0160               STR      R1,[R0, #+0]
   \   00000002   4260               STR      R2,[R0, #+4]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_SetTx(AT91PS_PDC, char *, unsigned int)
   \                     AT91F_PDC_SetTx:
   \   00000000   8160               STR      R1,[R0, #+8]
   \   00000002   C260               STR      R2,[R0, #+12]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_EnableTx(AT91PS_PDC)
   \                     AT91F_PDC_EnableTx:
   \   00000000   8021               MOVS     R1,#+128
   \   00000002   4900               LSLS     R1,R1,#+1        ;; #+256
   \   00000004   0162               STR      R1,[R0, #+32]
   \   00000006   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_EnableRx(AT91PS_PDC)
   \                     AT91F_PDC_EnableRx:
   \   00000000   0121               MOVS     R1,#+1
   \   00000002   0162               STR      R1,[R0, #+32]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_DisableTx(AT91PS_PDC)
   \                     AT91F_PDC_DisableTx:
   \   00000000   8021               MOVS     R1,#+128
   \   00000002   8900               LSLS     R1,R1,#+2        ;; #+512
   \   00000004   0162               STR      R1,[R0, #+32]
   \   00000006   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_DisableRx(AT91PS_PDC)
   \                     AT91F_PDC_DisableRx:
   \   00000000   0221               MOVS     R1,#+2
   \   00000002   0162               STR      R1,[R0, #+32]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork int AT91F_PDC_IsRxEmpty(AT91PS_PDC)
   \                     AT91F_PDC_IsRxEmpty:
   \   00000000   4068               LDR      R0,[R0, #+4]
   \   00000002   401E               SUBS     R0,R0,#+1
   \   00000004   8041               SBCS     R0,R0,R0
   \   00000006   C00F               LSRS     R0,R0,#+31
   \   00000008   0006               LSLS     R0,R0,#+24       ;; ZeroExtS R0,R0,#+24,#+24
   \   0000000A   000E               LSRS     R0,R0,#+24
   \   0000000C   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork int AT91F_PDC_IsNextRxEmpty(AT91PS_PDC)
   \                     AT91F_PDC_IsNextRxEmpty:
   \   00000000   4069               LDR      R0,[R0, #+20]
   \   00000002   401E               SUBS     R0,R0,#+1
   \   00000004   8041               SBCS     R0,R0,R0
   \   00000006   C00F               LSRS     R0,R0,#+31
   \   00000008   0006               LSLS     R0,R0,#+24       ;; ZeroExtS R0,R0,#+24,#+24
   \   0000000A   000E               LSRS     R0,R0,#+24
   \   0000000C   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PDC_Open(AT91PS_PDC)
   \                     AT91F_PDC_Open:
   \   00000000   10B5               PUSH     {R4,LR}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   2000               MOVS     R0,R4
   \   00000006   ........           BL       AT91F_PDC_DisableRx
   \   0000000A   2000               MOVS     R0,R4
   \   0000000C   ........           BL       AT91F_PDC_DisableTx
   \   00000010   0022               MOVS     R2,#+0
   \   00000012   0021               MOVS     R1,#+0
   \   00000014   2000               MOVS     R0,R4
   \   00000016   ........           BL       AT91F_PDC_SetNextTx
   \   0000001A   0022               MOVS     R2,#+0
   \   0000001C   0021               MOVS     R1,#+0
   \   0000001E   2000               MOVS     R0,R4
   \   00000020   ........           BL       AT91F_PDC_SetNextRx
   \   00000024   0022               MOVS     R2,#+0
   \   00000026   0021               MOVS     R1,#+0
   \   00000028   2000               MOVS     R0,R4
   \   0000002A   ........           BL       AT91F_PDC_SetTx
   \   0000002E   0022               MOVS     R2,#+0
   \   00000030   0021               MOVS     R1,#+0
   \   00000032   2000               MOVS     R0,R4
   \   00000034   ........           BL       AT91F_PDC_SetRx
   \   00000038   2000               MOVS     R0,R4
   \   0000003A   ........           BL       AT91F_PDC_EnableRx
   \   0000003E   2000               MOVS     R0,R4
   \   00000040   ........           BL       AT91F_PDC_EnableTx
   \   00000044   10BC               POP      {R4}
   \   00000046   01BC               POP      {R0}
   \   00000048   0047               BX       R0               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork unsigned int AT91F_PDC_ReceiveFrame(AT91PS_PDC, char *, unsigned int, char *, unsigned int)
   \                     AT91F_PDC_ReceiveFrame:
   \   00000000   F8B5               PUSH     {R3-R7,LR}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   0D00               MOVS     R5,R1
   \   00000006   1600               MOVS     R6,R2
   \   00000008   069F               LDR      R7,[SP, #+24]
   \   0000000A   2000               MOVS     R0,R4
   \   0000000C   ........           BL       AT91F_PDC_IsRxEmpty
   \   00000010   0028               CMP      R0,#+0
   \   00000012   0BD0               BEQ      ??AT91F_PDC_ReceiveFrame_0
   \   00000014   3200               MOVS     R2,R6
   \   00000016   2900               MOVS     R1,R5
   \   00000018   2000               MOVS     R0,R4
   \   0000001A   ........           BL       AT91F_PDC_SetRx
   \   0000001E   3A00               MOVS     R2,R7
   \   00000020   0099               LDR      R1,[SP, #+0]
   \   00000022   2000               MOVS     R0,R4
   \   00000024   ........           BL       AT91F_PDC_SetNextRx
   \   00000028   0220               MOVS     R0,#+2
   \   0000002A   0CE0               B        ??AT91F_PDC_ReceiveFrame_1
   \                     ??AT91F_PDC_ReceiveFrame_0:
   \   0000002C   2000               MOVS     R0,R4
   \   0000002E   ........           BL       AT91F_PDC_IsNextRxEmpty
   \   00000032   0028               CMP      R0,#+0
   \   00000034   06D0               BEQ      ??AT91F_PDC_ReceiveFrame_2
   \   00000036   3200               MOVS     R2,R6
   \   00000038   2900               MOVS     R1,R5
   \   0000003A   2000               MOVS     R0,R4
   \   0000003C   ........           BL       AT91F_PDC_SetNextRx
   \   00000040   0120               MOVS     R0,#+1
   \   00000042   00E0               B        ??AT91F_PDC_ReceiveFrame_1
   \                     ??AT91F_PDC_ReceiveFrame_2:
   \   00000044   0020               MOVS     R0,#+0
   \                     ??AT91F_PDC_ReceiveFrame_1:
   \   00000046   01B0               ADD      SP,SP,#+4
   \   00000048   F0BC               POP      {R4-R7}
   \   0000004A   02BC               POP      {R1}
   \   0000004C   0847               BX       R1               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PIO_CfgPeriph(AT91PS_PIO, unsigned int, unsigned int)
   \                     AT91F_PIO_CfgPeriph:
   \   00000000   0167               STR      R1,[R0, #+112]
   \   00000002   4267               STR      R2,[R0, #+116]
   \   00000004   0A43               ORRS     R2,R2,R1
   \   00000006   4260               STR      R2,[R0, #+4]
   \   00000008   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_PMC_EnablePeriphClock(AT91PS_PMC, unsigned int)
   \                     AT91F_PMC_EnablePeriphClock:
   \   00000000   0161               STR      R1,[R0, #+16]
   \   00000002   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork unsigned int AT91F_US_Baudrate(unsigned int const, unsigned int const)
   \                     AT91F_US_Baudrate:
   \   00000000   10B5               PUSH     {R4,LR}
   \   00000002   0A22               MOVS     R2,#+10
   \   00000004   5043               MULS     R0,R2,R0
   \   00000006   1022               MOVS     R2,#+16
   \   00000008   5143               MULS     R1,R2,R1
   \   0000000A   ........           BL       __aeabi_uidivmod
   \   0000000E   0400               MOVS     R4,R0
   \   00000010   2000               MOVS     R0,R4
   \   00000012   0A21               MOVS     R1,#+10
   \   00000014   ........           BL       __aeabi_uidivmod
   \   00000018   0529               CMP      R1,#+5
   \   0000001A   06D3               BCC      ??AT91F_US_Baudrate_0
   \   0000001C   2000               MOVS     R0,R4
   \   0000001E   0A21               MOVS     R1,#+10
   \   00000020   ........           BL       __aeabi_uidivmod
   \   00000024   0400               MOVS     R4,R0
   \   00000026   641C               ADDS     R4,R4,#+1
   \   00000028   04E0               B        ??AT91F_US_Baudrate_1
   \                     ??AT91F_US_Baudrate_0:
   \   0000002A   2000               MOVS     R0,R4
   \   0000002C   0A21               MOVS     R1,#+10
   \   0000002E   ........           BL       __aeabi_uidivmod
   \   00000032   0400               MOVS     R4,R0
   \                     ??AT91F_US_Baudrate_1:
   \   00000034   2000               MOVS     R0,R4
   \   00000036   10BC               POP      {R4}
   \   00000038   02BC               POP      {R1}
   \   0000003A   0847               BX       R1               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US_SetBaudrate(AT91PS_USART, unsigned int, unsigned int)
   \                     AT91F_US_SetBaudrate:
   \   00000000   10B5               PUSH     {R4,LR}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   0800               MOVS     R0,R1
   \   00000006   1100               MOVS     R1,R2
   \   00000008   ........           BL       AT91F_US_Baudrate
   \   0000000C   2062               STR      R0,[R4, #+32]
   \   0000000E   10BC               POP      {R4}
   \   00000010   01BC               POP      {R0}
   \   00000012   0047               BX       R0               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US_SetTimeguard(AT91PS_USART, unsigned int)
   \                     AT91F_US_SetTimeguard:
   \   00000000   8162               STR      R1,[R0, #+40]
   \   00000002   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US_EnableIt(AT91PS_USART, unsigned int)
   \                     AT91F_US_EnableIt:
   \   00000000   8160               STR      R1,[R0, #+8]
   \   00000002   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US_Configure(AT91PS_USART, unsigned int, unsigned int, unsigned int, unsigned int)
   \                     AT91F_US_Configure:
   \   00000000   70B5               PUSH     {R4-R6,LR}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   1500               MOVS     R5,R2
   \   00000006   1A00               MOVS     R2,R3
   \   00000008   049E               LDR      R6,[SP, #+16]
   \   0000000A   0020               MOVS     R0,#+0
   \   0000000C   C043               MVNS     R0,R0            ;; #-1
   \   0000000E   E060               STR      R0,[R4, #+12]
   \   00000010   AC20               MOVS     R0,#+172
   \   00000012   2060               STR      R0,[R4, #+0]
   \   00000014   2000               MOVS     R0,R4
   \   00000016   ........           BL       AT91F_US_SetBaudrate
   \   0000001A   3100               MOVS     R1,R6
   \   0000001C   2000               MOVS     R0,R4
   \   0000001E   ........           BL       AT91F_US_SetTimeguard
   \   00000022   8020               MOVS     R0,#+128
   \   00000024   4000               LSLS     R0,R0,#+1        ;; #+256
   \   00000026   2018               ADDS     R0,R4,R0
   \   00000028   ........           BL       AT91F_PDC_Open
   \   0000002C   6560               STR      R5,[R4, #+4]
   \   0000002E   70BC               POP      {R4-R6}
   \   00000030   01BC               POP      {R0}
   \   00000032   0047               BX       R0               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US_EnableRx(AT91PS_USART)
   \                     AT91F_US_EnableRx:
   \   00000000   1021               MOVS     R1,#+16
   \   00000002   0160               STR      R1,[R0, #+0]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US_EnableTx(AT91PS_USART)
   \                     AT91F_US_EnableTx:
   \   00000000   4021               MOVS     R1,#+64
   \   00000002   0160               STR      R1,[R0, #+0]
   \   00000004   7047               BX       LR               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork unsigned int AT91F_US_ReceiveFrame(AT91PS_USART, unsigned char *, unsigned int, unsigned char *, unsigned int)
   \                     AT91F_US_ReceiveFrame:
   \   00000000   10B5               PUSH     {R4,LR}
   \   00000002   029C               LDR      R4,[SP, #+8]
   \   00000004   82B0               SUB      SP,SP,#+8
   \   00000006   0094               STR      R4,[SP, #+0]
   \   00000008   8024               MOVS     R4,#+128
   \   0000000A   6400               LSLS     R4,R4,#+1        ;; #+256
   \   0000000C   0019               ADDS     R0,R0,R4
   \   0000000E   ........           BL       AT91F_PDC_ReceiveFrame
   \   00000012   02B0               ADD      SP,SP,#+8
   \   00000014   10BC               POP      {R4}
   \   00000016   02BC               POP      {R1}
   \   00000018   0847               BX       R1               ;; return

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US1_CfgPMC(void)
   \                     AT91F_US1_CfgPMC:
   \   00000000   01B5               PUSH     {R0,LR}
   \   00000002   8021               MOVS     R1,#+128
   \   00000004   0248               LDR      R0,??AT91F_US1_CfgPMC_0  ;; 0xfffffc00
   \   00000006   ........           BL       AT91F_PMC_EnablePeriphClock
   \   0000000A   01B0               ADD      SP,SP,#+4
   \   0000000C   01BC               POP      {R0}
   \   0000000E   0047               BX       R0               ;; return
   \                     ??AT91F_US1_CfgPMC_0:
   \   00000010   00FCFFFF           DC32     0xfffffc00

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US1_CfgPIO(void)
   \                     AT91F_US1_CfgPIO:
   \   00000000   01B5               PUSH     {R0,LR}
   \   00000002   0022               MOVS     R2,#+0
   \   00000004   C021               MOVS     R1,#+192
   \   00000006   C903               LSLS     R1,R1,#+15       ;; #+6291456
   \   00000008   0248               LDR      R0,??AT91F_US1_CfgPIO_0  ;; 0xfffff400
   \   0000000A   ........           BL       AT91F_PIO_CfgPeriph
   \   0000000E   01B0               ADD      SP,SP,#+4
   \   00000010   01BC               POP      {R0}
   \   00000012   0047               BX       R0               ;; return
   \                     ??AT91F_US1_CfgPIO_0:
   \   00000014   00F4FFFF           DC32     0xfffff400

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US0_CfgPMC(void)
   \                     AT91F_US0_CfgPMC:
   \   00000000   01B5               PUSH     {R0,LR}
   \   00000002   4021               MOVS     R1,#+64
   \   00000004   0248               LDR      R0,??AT91F_US0_CfgPMC_0  ;; 0xfffffc00
   \   00000006   ........           BL       AT91F_PMC_EnablePeriphClock
   \   0000000A   01B0               ADD      SP,SP,#+4
   \   0000000C   01BC               POP      {R0}
   \   0000000E   0047               BX       R0               ;; return
   \                     ??AT91F_US0_CfgPMC_0:
   \   00000010   00FCFFFF           DC32     0xfffffc00

   \                                 In section Debug.txt, align 4
   \   __??Code16?? __code __interwork void AT91F_US0_CfgPIO(void)
   \                     AT91F_US0_CfgPIO:
   \   00000000   01B5               PUSH     {R0,LR}
   \   00000002   0022               MOVS     R2,#+0
   \   00000004   E021               MOVS     R1,#+224
   \   00000006   0348               LDR      R0,??AT91F_US0_CfgPIO_0  ;; 0xfffff400
   \   00000008   ........           BL       AT91F_PIO_CfgPeriph
   \   0000000C   01B0               ADD      SP,SP,#+4
   \   0000000E   01BC               POP      {R0}
   \   00000010   0047               BX       R0               ;; return
   \   00000012   C046               Nop      
   \                     ??AT91F_US0_CfgPIO_0:
   \   00000014   00F4FFFF           DC32     0xfffff400

                                          
                                          ^
"D:\Zeuron\Projekty\S300\S300-program v1.4 - 12.06.2013\Framework\Configuration\InterruptPriority.h",59  Warning[Pe001]: 
          last line of file ends without a newline
     46          #include "WizFi.h"

   
   ^
"D:\Zeuron\Projekty\S300\S300-program v1.4 - 12.06.2013\Framework\WizFi.h",172  Warning[Pe001]: 
          last line of file ends without a newline
     47          
     48          
     49          //Zmienne lokalne -------------------------------------------------------------

   \                                 In section .data, align 1
     50              char SendModbusEnable = 1;                                                  //komunikacja z zewnêtrznym urz¹dzeniem poprzez MODBUS RS485 
   \                     SendModbusEnable:
   \   00000000   01                 DC8 1
     51              
     52          //___________________________Koniec zmiennych lokalnych________________________
     53          
     54          
     55          
     56          
     57          //Zmienne globalne -------------------------------------------------------------

   \                                 In section .bss, align 1
     58              char   g_US0_Connect_OK = 0;                                                //1 - trwa komunikacja poprzez US0
   \                     g_US0_Connect_OK:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
     59              char   g_US1_Connect_OK = 0;                                                //1 - trwa komunikacja poprzez US1
   \                     g_US1_Connect_OK:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
     60              char   g_ETH0_Connect_OK = 0;                                               //1 - trwa komunikacja poprzez ETH0
   \                     g_ETH0_Connect_OK:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
     61              char   g_ETH1_Connect_OK = 0;                                               //1 - trwa komunikacja poprzez ETH0
   \                     g_ETH1_Connect_OK:
   \   00000000                      DS8 1

   \                                 In section .data, align 4
     62              int    g_US0_Comm_MinCykle = 10;                                            //Czas pomiêdzy kolejnymi pytaniami (przy poprawnych odpowiedziach) US0
   \                     g_US0_Comm_MinCykle:
   \   00000000   0A000000           DC32 10

   \                                 In section .data, align 4
     63              float  g_US0_OneByteTxTime = 5;                                             //Czas trwania jednego bajtu (w ms) US0
   \                     g_US0_OneByteTxTime:
   \   00000000   0000A040           DC32 40A00000H

   \                                 In section .data, align 4
     64              int    g_US1_Comm_MinCykle = 1;                                            //Czas pomiêdzy kolejnymi pytaniami (przy poprawnych odpowiedziach) US1
   \                     g_US1_Comm_MinCykle:
   \   00000000   01000000           DC32 1

   \                                 In section .data, align 4
     65              float  g_US1_OneByteTxTime = 5;                                             //Czas trwania jednego bajtu (w ms) US1
   \                     g_US1_OneByteTxTime:
   \   00000000   0000A040           DC32 40A00000H

   \                                 In section .bss, align 4
     66              unsigned char  US0_Buffer[US0_BUFFER_Rx_SIZE];                                  //bufor odbiorczy USART 0
   \                     US0_Buffer:
   \   00000000                      DS8 20

   \                                 In section .bss, align 4
     67              unsigned char  US1_Buffer[US1_BUFFER_Rx_SIZE];                                  //bufor odbiorczy USART 0
   \                     US1_Buffer:
   \   00000000                      DS8 580
     68              
     69              
     70          //___________________________Koniec zmiennych globalnych________________________
     71              
     72              
     73          
     74          //Zmienne zewnêtrzne -----------------------------------------------------------    
     75              extern char US0_MasterMODBUS_ENABLE;
     76              extern char US1_MasterMODBUS_ENABLE;
     77              extern BYTE Buff_TX_1[];
     78              extern _Net NET; 
     79          //___________________________Koniec zmiennych zewnêtrznych______________________    
     80           
     81          
     82              
     83              
     84              
     85              
     86          //-----------------------------------------------------------------------------
     87          //!  Nazwa funkcji :    US0_init
     88          //!  Funkcja inicjalizacji USART 0
     89          //-----------------------------------------------------------------------------
     90          //! 
     91          //-----------------------------------------------------------------------------

   \                                 In section Debug.txt, align 4, keep-with-next
     92          void US0_init(void)
     93          {
   \                     US0_init:
   \   00000000   10B5               PUSH     {R4,LR}
     94          
     95            
     96            
     97                  // Configure USART
     98                AT91F_US0_CfgPMC();
   \   00000002   ........           BL       AT91F_US0_CfgPMC
     99                AT91F_PDC_DisableRx(AT91C_BASE_PDC_US0);
   \   00000006   2748               LDR      R0,??US0_init_0  ;; 0xfffc0100
   \   00000008   ........           BL       AT91F_PDC_DisableRx
    100                AT91F_PDC_DisableTx(AT91C_BASE_PDC_US0);
   \   0000000C   2548               LDR      R0,??US0_init_0  ;; 0xfffc0100
   \   0000000E   ........           BL       AT91F_PDC_DisableTx
    101               
    102                AT91F_US_Configure(AT91C_BASE_US0, AT91C_MASTER_CLOCK,
    103                                 USART485_MODE, g_US0_BAUDRATE, 0);
   \   00000012   82B0               SUB      SP,SP,#+8
   \   00000014   0020               MOVS     R0,#+0
   \   00000016   0090               STR      R0,[SP, #+0]
   \   00000018   2348               LDR      R0,??US0_init_0+0x4  ;; g_US0_BAUDRATE
   \   0000001A   0368               LDR      R3,[R0, #+0]
   \   0000001C   234A               LDR      R2,??US0_init_0+0x8  ;; 0x408c1
   \   0000001E   ....               LDR      R1,??DataTable14  ;; 0x2dc6c00
   \   00000020   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   00000022   ........           BL       AT91F_US_Configure
   \   00000026   02B0               ADD      SP,SP,#+8
    104            
    105                AT91C_BASE_US0->US_CR = AT91C_US_STTTO;
   \   00000028   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   0000002A   8021               MOVS     R1,#+128
   \   0000002C   0901               LSLS     R1,R1,#+4        ;; #+2048
   \   0000002E   0160               STR      R1,[R0, #+0]
    106          
    107                AT91F_US_EnableIt(AT91C_BASE_US0,AT91C_US_RXBUFF | AT91C_US_TIMEOUT );     //uruchomienie/ustawienie przerwania od przepe³nienia bufora oraz od time-out
   \   00000030   8821               MOVS     R1,#+136
   \   00000032   4901               LSLS     R1,R1,#+5        ;; #+4352
   \   00000034   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   00000036   ........           BL       AT91F_US_EnableIt
    108          
    109                // konfiguracja przerqwania USART0 
    110                AT91F_AIC_ConfigureIt ( AT91C_BASE_AIC, AT91C_ID_US0, USART0_INTERRUPT_LEVEL, AT91C_AIC_SRCTYPE_INT_HIGH_LEVEL, Usart0_handler); 
   \   0000003A   82B0               SUB      SP,SP,#+8
   \   0000003C   1C48               LDR      R0,??US0_init_0+0xC  ;; Usart0_handler
   \   0000003E   0090               STR      R0,[SP, #+0]
   \   00000040   0023               MOVS     R3,#+0
   \   00000042   0222               MOVS     R2,#+2
   \   00000044   0621               MOVS     R1,#+6
   \   00000046   ....               LDR      R0,??DataTable24  ;; 0xfffff000
   \   00000048   ........           BL       AT91F_AIC_ConfigureIt
   \   0000004C   02B0               ADD      SP,SP,#+8
    111                  
    112                AT91F_US_EnableRx(AT91C_BASE_US0);
   \   0000004E   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   00000050   ........           BL       AT91F_US_EnableRx
    113                AT91F_US_EnableTx(AT91C_BASE_US0);
   \   00000054   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   00000056   ........           BL       AT91F_US_EnableTx
    114          
    115             
    116                AT91F_US0_CfgPIO();                                                       //konfiguracja pinów
   \   0000005A   ........           BL       AT91F_US0_CfgPIO
    117                
    118                unsigned int xxx= AT91F_US_ReceiveFrame (                                 //Ustawienie bufora odbiorczego
    119          	AT91C_BASE_US0,
    120          	US0_Buffer,
    121          	US0_BUFFER_Rx_SIZE,
    122          	0,
    123          	0 );
   \   0000005E   82B0               SUB      SP,SP,#+8
   \   00000060   0020               MOVS     R0,#+0
   \   00000062   0090               STR      R0,[SP, #+0]
   \   00000064   0023               MOVS     R3,#+0
   \   00000066   1422               MOVS     R2,#+20
   \   00000068   ....               LDR      R1,??DataTable13  ;; US0_Buffer
   \   0000006A   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   0000006C   ........           BL       AT91F_US_ReceiveFrame
   \   00000070   02B0               ADD      SP,SP,#+8
   \   00000072   0400               MOVS     R4,R0
    124          
    125                AT91C_BASE_US0->US_RTOR = TIME_OUT_US;                                    //ustawienie czasu time-out (w bitach)
   \   00000074   0F48               LDR      R0,??US0_init_0+0x10  ;; 0xfffc0024
   \   00000076   0A21               MOVS     R1,#+10
   \   00000078   0160               STR      R1,[R0, #+0]
    126                AT91C_BASE_US0->US_CR = AT91C_US_STTTO;                                   //restart time-out
   \   0000007A   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   0000007C   8021               MOVS     R1,#+128
   \   0000007E   0901               LSLS     R1,R1,#+4        ;; #+2048
   \   00000080   0160               STR      R1,[R0, #+0]
    127          
    128                //wy³¹czone przerwanie bo koliduje z  innymi przerwaniami 
    129                /*      
    130                AT91F_AIC_EnableIt (AT91C_BASE_AIC, AT91C_ID_US0);                        //uruchomienie przerwania od USARTA
    131                */
    132                g_US0_OneByteTxTime  = 1000/ ((float) (g_US0_BAUDRATE /8));
   \   00000082   0948               LDR      R0,??US0_init_0+0x4  ;; g_US0_BAUDRATE
   \   00000084   0068               LDR      R0,[R0, #+0]
   \   00000086   0821               MOVS     R1,#+8
   \   00000088   ........           BL       __aeabi_idivmod
   \   0000008C   ........           BL       __aeabi_i2f
   \   00000090   0100               MOVS     R1,R0
   \   00000092   ....               LDR      R0,??DataTable25  ;; 0x447a0000
   \   00000094   ........           BL       __aeabi_fdiv
   \   00000098   0749               LDR      R1,??US0_init_0+0x14  ;; g_US0_OneByteTxTime
   \   0000009A   0860               STR      R0,[R1, #+0]
    133                
    134          }//_______________________ Koniec funkcji US0_init ____________________________ 
   \   0000009C   10BC               POP      {R4}
   \   0000009E   01BC               POP      {R0}
   \   000000A0   0047               BX       R0               ;; return
   \   000000A2   C046               Nop      
   \                     ??US0_init_0:
   \   000000A4   0001FCFF           DC32     0xfffc0100
   \   000000A8   ........           DC32     g_US0_BAUDRATE
   \   000000AC   C1080400           DC32     0x408c1
   \   000000B0   ........           DC32     Usart0_handler
   \   000000B4   2400FCFF           DC32     0xfffc0024
   \   000000B8   ........           DC32     g_US0_OneByteTxTime
    135          
    136          
    137          
    138          
    139          
    140          
    141          //-----------------------------------------------------------------------------
    142          //! Nazwa funkcji :    Usart0_handler
    143          //! Funkcja obs³ugi przerwania USART 0
    144          //-----------------------------------------------------------------------------
    145          //  
    146          //----------------------------------------------------------------------------- 

   \                                 In section Debug.txt, align 4, keep-with-next
    147          void Usart0_handler(void)                        //timer isr 
    148          { 
   \                     Usart0_handler:
   \   00000000   10B5               PUSH     {R4,LR}
    149            
    150            //char CheckNoZero;                          //sprawdza czy tabela odczytów TP nie ma zer
    151              unsigned int dummy = AT91C_BASE_US0->US_CSR;                  //interrupts    
   \   00000002   0F48               LDR      R0,??Usart0_handler_0  ;; 0xfffc0014
   \   00000004   0068               LDR      R0,[R0, #+0]
    152          
    153              AT91PS_USART USART_pt = AT91C_BASE_US0; 
   \   00000006   ....               LDR      R4,??DataTable12  ;; 0xfffc0000
    154              unsigned int status; 
    155              
    156              
    157              //* get Usart status register 
    158              status = USART_pt->US_CSR; 
   \   00000008   6169               LDR      R1,[R4, #+20]
    159            
    160               
    161              if ( status & AT91C_US_TIMEOUT)       //wystapil timeout lub odebrano dane
   \   0000000A   C905               LSLS     R1,R1,#+23
   \   0000000C   13D5               BPL      ??Usart0_handler_1
    162                {
    163          
    164                  AT91C_BASE_US0->US_CR = AT91C_US_STTTO;
   \   0000000E   ....               LDR      R0,??DataTable12  ;; 0xfffc0000
   \   00000010   8021               MOVS     R1,#+128
   \   00000012   0901               LSLS     R1,R1,#+4        ;; #+2048
   \   00000014   0160               STR      R1,[R0, #+0]
    165                  AT91C_BASE_US0->US_RCR = 0;
   \   00000016   0B48               LDR      R0,??Usart0_handler_0+0x4  ;; 0xfffc0104
   \   00000018   0021               MOVS     R1,#+0
   \   0000001A   0160               STR      R1,[R0, #+0]
    166          
    167                  unsigned int xxx= AT91F_US_ReceiveFrame (
    168          	USART_pt,
    169          	US0_Buffer,
    170          	US0_BUFFER_Rx_SIZE,
    171          	0,
    172          	0 );
   \   0000001C   82B0               SUB      SP,SP,#+8
   \   0000001E   0020               MOVS     R0,#+0
   \   00000020   0090               STR      R0,[SP, #+0]
   \   00000022   0023               MOVS     R3,#+0
   \   00000024   1422               MOVS     R2,#+20
   \   00000026   ....               LDR      R1,??DataTable13  ;; US0_Buffer
   \   00000028   2000               MOVS     R0,R4
   \   0000002A   ........           BL       AT91F_US_ReceiveFrame
   \   0000002E   02B0               ADD      SP,SP,#+8
    173                  
    174                  SendModbusEnable=1;
   \   00000030   0549               LDR      R1,??Usart0_handler_0+0x8  ;; SendModbusEnable
   \   00000032   0122               MOVS     R2,#+1
   \   00000034   0A70               STRB     R2,[R1, #+0]
    175          
    176          
    177                }
    178             
    179                  status = USART_pt->US_CSR; 
   \                     ??Usart0_handler_1:
   \   00000036   6169               LDR      R1,[R4, #+20]
    180              
    181          
    182           
    183            
    184          }//_______________________ Koniec funkcji Usart0_handler _________________________
   \   00000038   10BC               POP      {R4}
   \   0000003A   01BC               POP      {R0}
   \   0000003C   0047               BX       R0               ;; return
   \   0000003E   C046               Nop      
   \                     ??Usart0_handler_0:
   \   00000040   1400FCFF           DC32     0xfffc0014
   \   00000044   0401FCFF           DC32     0xfffc0104
   \   00000048   ........           DC32     SendModbusEnable
    185           
    186          
    187          
    188          
    189          
    190          
    191          
    192          //-----------------------------------------------------------------------------
    193          //!  Nazwa funkcji :    US1_init
    194          //!  Funkcja inicjalizacji USART 1
    195          //-----------------------------------------------------------------------------
    196          //! 
    197          //-----------------------------------------------------------------------------

   \                                 In section Debug.txt, align 4, keep-with-next
    198          void US1_init(void)
    199          {
   \                     US1_init:
   \   00000000   10B5               PUSH     {R4,LR}
    200                // Configure USART
    201                AT91F_US1_CfgPMC();
   \   00000002   ........           BL       AT91F_US1_CfgPMC
    202                AT91F_PDC_DisableRx(AT91C_BASE_PDC_US1);
   \   00000006   2948               LDR      R0,??US1_init_0  ;; 0xfffc4100
   \   00000008   ........           BL       AT91F_PDC_DisableRx
    203                AT91F_PDC_DisableTx(AT91C_BASE_PDC_US1);
   \   0000000C   2748               LDR      R0,??US1_init_0  ;; 0xfffc4100
   \   0000000E   ........           BL       AT91F_PDC_DisableTx
    204                
    205                AT91F_US_Configure(AT91C_BASE_US1, AT91C_MASTER_CLOCK,
    206                                 USART232_MODE, g_US1_BAUDRATE, 0);
   \   00000012   82B0               SUB      SP,SP,#+8
   \   00000014   0020               MOVS     R0,#+0
   \   00000016   0090               STR      R0,[SP, #+0]
   \   00000018   2548               LDR      R0,??US1_init_0+0x4  ;; g_US1_BAUDRATE
   \   0000001A   0368               LDR      R3,[R0, #+0]
   \   0000001C   254A               LDR      R2,??US1_init_0+0x8  ;; 0x408c0
   \   0000001E   ....               LDR      R1,??DataTable14  ;; 0x2dc6c00
   \   00000020   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   00000022   ........           BL       AT91F_US_Configure
   \   00000026   02B0               ADD      SP,SP,#+8
    207              
    208                AT91C_BASE_US1->US_CR = AT91C_US_STTTO;
   \   00000028   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   0000002A   8021               MOVS     R1,#+128
   \   0000002C   0901               LSLS     R1,R1,#+4        ;; #+2048
   \   0000002E   0160               STR      R1,[R0, #+0]
    209          
    210                AT91F_US_EnableIt(AT91C_BASE_US1,AT91C_US_RXBUFF | AT91C_US_TIMEOUT );     //uruchomienie/ustawienie przerwania od przepe³nienia bufora oraz od time-out
   \   00000030   8821               MOVS     R1,#+136
   \   00000032   4901               LSLS     R1,R1,#+5        ;; #+4352
   \   00000034   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   00000036   ........           BL       AT91F_US_EnableIt
    211          
    212                // konfiguracja przerqwania USART0 
    213                AT91F_AIC_ConfigureIt ( AT91C_BASE_AIC, AT91C_ID_US1, USART1_INTERRUPT_LEVEL, AT91C_AIC_SRCTYPE_INT_HIGH_LEVEL, Usart1_handler); 
   \   0000003A   82B0               SUB      SP,SP,#+8
   \   0000003C   1E48               LDR      R0,??US1_init_0+0xC  ;; Usart1_handler
   \   0000003E   0090               STR      R0,[SP, #+0]
   \   00000040   0023               MOVS     R3,#+0
   \   00000042   0522               MOVS     R2,#+5
   \   00000044   0721               MOVS     R1,#+7
   \   00000046   ....               LDR      R0,??DataTable24  ;; 0xfffff000
   \   00000048   ........           BL       AT91F_AIC_ConfigureIt
   \   0000004C   02B0               ADD      SP,SP,#+8
    214                  
    215                AT91F_US_EnableRx(AT91C_BASE_US1);
   \   0000004E   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   00000050   ........           BL       AT91F_US_EnableRx
    216                AT91F_US_EnableTx(AT91C_BASE_US1);
   \   00000054   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   00000056   ........           BL       AT91F_US_EnableTx
    217          
    218                
    219                AT91F_US1_CfgPIO();                                                       //konfiguracja pinów
   \   0000005A   ........           BL       AT91F_US1_CfgPIO
    220                
    221                unsigned int xxx= AT91F_US_ReceiveFrame (                                 //Ustawienie bufora odbiorczego
    222          	AT91C_BASE_US1,
    223          	US1_Buffer,
    224          	US1_BUFFER_Rx_SIZE,
    225          	0,
    226          	0 );
   \   0000005E   82B0               SUB      SP,SP,#+8
   \   00000060   0020               MOVS     R0,#+0
   \   00000062   0090               STR      R0,[SP, #+0]
   \   00000064   0023               MOVS     R3,#+0
   \   00000066   9122               MOVS     R2,#+145
   \   00000068   9200               LSLS     R2,R2,#+2        ;; #+580
   \   0000006A   ....               LDR      R1,??DataTable30  ;; US1_Buffer
   \   0000006C   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   0000006E   ........           BL       AT91F_US_ReceiveFrame
   \   00000072   02B0               ADD      SP,SP,#+8
   \   00000074   0400               MOVS     R4,R0
    227          
    228                AT91C_BASE_US1->US_RTOR = TIME_OUT_US1;                                    //ustawienie czasu time-out (w bitach)
   \   00000076   1148               LDR      R0,??US1_init_0+0x10  ;; 0xfffc4024
   \   00000078   3C21               MOVS     R1,#+60
   \   0000007A   0160               STR      R1,[R0, #+0]
    229                AT91C_BASE_US1->US_CR = AT91C_US_STTTO;                                   //restart time-out
   \   0000007C   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
   \   0000007E   8021               MOVS     R1,#+128
   \   00000080   0901               LSLS     R1,R1,#+4        ;; #+2048
   \   00000082   0160               STR      R1,[R0, #+0]
    230                
    231                AT91F_AIC_EnableIt (AT91C_BASE_AIC, AT91C_ID_US1);                        //uruchomienie przerwania od USARTA
   \   00000084   0721               MOVS     R1,#+7
   \   00000086   ....               LDR      R0,??DataTable24  ;; 0xfffff000
   \   00000088   ........           BL       AT91F_AIC_EnableIt
    232                
    233                g_US1_OneByteTxTime  = 1000/ ((float) (g_US1_BAUDRATE /8));
   \   0000008C   0848               LDR      R0,??US1_init_0+0x4  ;; g_US1_BAUDRATE
   \   0000008E   0068               LDR      R0,[R0, #+0]
   \   00000090   0821               MOVS     R1,#+8
   \   00000092   ........           BL       __aeabi_idivmod
   \   00000096   ........           BL       __aeabi_i2f
   \   0000009A   0100               MOVS     R1,R0
   \   0000009C   ....               LDR      R0,??DataTable25  ;; 0x447a0000
   \   0000009E   ........           BL       __aeabi_fdiv
   \   000000A2   0749               LDR      R1,??US1_init_0+0x14  ;; g_US1_OneByteTxTime
   \   000000A4   0860               STR      R0,[R1, #+0]
    234          }//_______________________ Koniec funkcji US1_init ____________________________ 
   \   000000A6   10BC               POP      {R4}
   \   000000A8   01BC               POP      {R0}
   \   000000AA   0047               BX       R0               ;; return
   \                     ??US1_init_0:
   \   000000AC   0041FCFF           DC32     0xfffc4100
   \   000000B0   ........           DC32     g_US1_BAUDRATE
   \   000000B4   C0080400           DC32     0x408c0
   \   000000B8   ........           DC32     Usart1_handler
   \   000000BC   2440FCFF           DC32     0xfffc4024
   \   000000C0   ........           DC32     g_US1_OneByteTxTime
    235          
    236          
    237          
    238          
    239          
    240          
    241          //-----------------------------------------------------------------------------
    242          //! Nazwa funkcji :    Usart1_handler 
    243          //! Funkcja obs³ugi przerwania USART 1
    244          //-----------------------------------------------------------------------------
    245          //  
    246          //----------------------------------------------------------------------------- 

   \                                 In section Debug.txt, align 4, keep-with-next
    247          void Usart1_handler(void)                        //timer isr 
    248          { 
   \                     Usart1_handler:
   \   00000000   10B5               PUSH     {R4,LR}
    249            
    250            
    251            //char CheckNoZero;                          //sprawdza czy tabela odczytów TP nie ma zer
    252              unsigned int dummy = AT91C_BASE_US1->US_CSR;                  //interrupts    
   \   00000002   1248               LDR      R0,??Usart1_handler_0  ;; 0xfffc4014
   \   00000004   0168               LDR      R1,[R0, #+0]
    253          
    254              AT91PS_USART USART_pt = AT91C_BASE_US1; 
   \   00000006   ....               LDR      R0,??DataTable29  ;; 0xfffc4000
    255              unsigned int status; 
    256              
    257              
    258              //* get Usart status register 
    259              status = USART_pt->US_CSR; 
   \   00000008   4269               LDR      R2,[R0, #+20]
    260             
    261             
    262              if (( status & AT91C_US_TIMEOUT) || ( status & AT91C_US_RXBUFF))      //wystapil timeout lub odebrano dane
   \   0000000A   8823               MOVS     R3,#+136
   \   0000000C   5B01               LSLS     R3,R3,#+5        ;; #+4352
   \   0000000E   1340               ANDS     R3,R3,R2
   \   00000010   002B               CMP      R3,#+0
   \   00000012   17D0               BEQ      ??Usart1_handler_1
    263                {
    264          
    265                  AT91C_BASE_US1->US_CR = AT91C_US_STTTO;
   \   00000014   ....               LDR      R1,??DataTable29  ;; 0xfffc4000
   \   00000016   8022               MOVS     R2,#+128
   \   00000018   1201               LSLS     R2,R2,#+4        ;; #+2048
   \   0000001A   0A60               STR      R2,[R1, #+0]
    266                  AT91C_BASE_US1->US_RCR = 0;
   \   0000001C   0C49               LDR      R1,??Usart1_handler_0+0x4  ;; 0xfffc4104
   \   0000001E   0022               MOVS     R2,#+0
   \   00000020   0A60               STR      R2,[R1, #+0]
    267          
    268               
    269                  unsigned int xxx= AT91F_US_ReceiveFrame (
    270          	USART_pt,
    271          	US1_Buffer,
    272          	US1_BUFFER_Rx_SIZE,
    273          	0,
    274          	0 );
   \   00000022   82B0               SUB      SP,SP,#+8
   \   00000024   0021               MOVS     R1,#+0
   \   00000026   0091               STR      R1,[SP, #+0]
   \   00000028   0023               MOVS     R3,#+0
   \   0000002A   9122               MOVS     R2,#+145
   \   0000002C   9200               LSLS     R2,R2,#+2        ;; #+580
   \   0000002E   ....               LDR      R1,??DataTable30  ;; US1_Buffer
   \   00000030   ........           BL       AT91F_US_ReceiveFrame
   \   00000034   02B0               ADD      SP,SP,#+8
   \   00000036   0400               MOVS     R4,R0
    275                  
    276                  WizFiResponseInterpreter(US1_Buffer,Buff_TX_1 ,AT91C_BASE_US1, &NET);
                         ^
Warning[Pe223]: function "WizFiResponseInterpreter" declared implicitly
   \   00000038   064B               LDR      R3,??Usart1_handler_0+0x8  ;; NET
   \   0000003A   ....               LDR      R2,??DataTable29  ;; 0xfffc4000
   \   0000003C   0649               LDR      R1,??Usart1_handler_0+0xC  ;; Buff_TX_1
   \   0000003E   ....               LDR      R0,??DataTable30  ;; US1_Buffer
   \   00000040   ........           BL       WizFiResponseInterpreter
    277          
    278                }
    279             
    280          }//_______________________ Koniec funkcji Usart0_handler _________________________
   \                     ??Usart1_handler_1:
   \   00000044   10BC               POP      {R4}
   \   00000046   01BC               POP      {R0}
   \   00000048   0047               BX       R0               ;; return
   \   0000004A   C046               Nop      
   \                     ??Usart1_handler_0:
   \   0000004C   1440FCFF           DC32     0xfffc4014
   \   00000050   0441FCFF           DC32     0xfffc4104
   \   00000054   ........           DC32     NET
   \   00000058   ........           DC32     Buff_TX_1

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   0000FCFF           DC32     0xfffc0000

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable13:
   \   00000000   ........           DC32     US0_Buffer

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable14:
   \   00000000   006CDC02           DC32     0x2dc6c00

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable24:
   \   00000000   00F0FFFF           DC32     0xfffff000

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   00007A44           DC32     0x447a0000

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   0040FCFF           DC32     0xfffc4000

   \                                 In section Debug.txt, align 4, keep-with-next
   \                     ??DataTable30:
   \   00000000   ........           DC32     US1_Buffer
    281           
    282          

   Maximum stack usage in bytes:

     Function                    .cstack
     --------                    -------
     AT91F_AIC_ConfigureIt           16
     AT91F_AIC_EnableIt               0
     AT91F_PDC_DisableRx              0
     AT91F_PDC_DisableTx              0
     AT91F_PDC_EnableRx               0
     AT91F_PDC_EnableTx               0
     AT91F_PDC_IsNextRxEmpty          0
     AT91F_PDC_IsRxEmpty              0
     AT91F_PDC_Open                   8
     AT91F_PDC_ReceiveFrame          24
     AT91F_PDC_SetNextRx              0
     AT91F_PDC_SetNextTx              0
     AT91F_PDC_SetRx                  0
     AT91F_PDC_SetTx                  0
     AT91F_PIO_CfgPeriph              0
     AT91F_PMC_EnablePeriphClock      0
     AT91F_US0_CfgPIO                 8
     AT91F_US0_CfgPMC                 8
     AT91F_US1_CfgPIO                 8
     AT91F_US1_CfgPMC                 8
     AT91F_US_Baudrate                8
     AT91F_US_Configure              16
     AT91F_US_EnableIt                0
     AT91F_US_EnableRx                0
     AT91F_US_EnableTx                0
     AT91F_US_ReceiveFrame           16
     AT91F_US_SetBaudrate             8
     AT91F_US_SetTimeguard            0
     US0_init                        16
     US1_init                        16
     Usart0_handler                  16
     Usart1_handler                  16


   Section sizes:

     Function/Label              Bytes
     --------------              -----
     g_US0_BAUDRATE                 4
     g_US0_Comm_TIMEOUT             4
     q_US0_Comm_Mode                1
     g_US1_BAUDRATE                 4
     g_US1_Comm_TIMEOUT             4
     AT91F_AIC_ConfigureIt         54
     AT91F_AIC_EnableIt            12
     AT91F_PDC_SetNextRx            6
     AT91F_PDC_SetNextTx            6
     AT91F_PDC_SetRx                6
     AT91F_PDC_SetTx                6
     AT91F_PDC_EnableTx             8
     AT91F_PDC_EnableRx             6
     AT91F_PDC_DisableTx            8
     AT91F_PDC_DisableRx            6
     AT91F_PDC_IsRxEmpty           14
     AT91F_PDC_IsNextRxEmpty       14
     AT91F_PDC_Open                74
     AT91F_PDC_ReceiveFrame        78
     AT91F_PIO_CfgPeriph           10
     AT91F_PMC_EnablePeriphClock    4
     AT91F_US_Baudrate             60
     AT91F_US_SetBaudrate          20
     AT91F_US_SetTimeguard          4
     AT91F_US_EnableIt              4
     AT91F_US_Configure            52
     AT91F_US_EnableRx              6
     AT91F_US_EnableTx              6
     AT91F_US_ReceiveFrame         26
     AT91F_US1_CfgPMC              20
     AT91F_US1_CfgPIO              24
     AT91F_US0_CfgPMC              20
     AT91F_US0_CfgPIO              24
     SendModbusEnable               1
     g_US0_Connect_OK               1
     g_US1_Connect_OK               1
     g_ETH0_Connect_OK              1
     g_ETH1_Connect_OK              1
     g_US0_Comm_MinCykle            4
     g_US0_OneByteTxTime            4
     g_US1_Comm_MinCykle            4
     g_US1_OneByteTxTime            4
     US0_Buffer                    20
     US1_Buffer                   580
     US0_init                     188
     Usart0_handler                76
     US1_init                     196
     Usart1_handler                92
     ??DataTable12                  4
     ??DataTable13                  4
     ??DataTable14                  4
     ??DataTable24                  4
     ??DataTable25                  4
     ??DataTable29                  4
     ??DataTable30                  4

 
   604 bytes in section .bss
    34 bytes in section .data
 1 158 bytes in section Debug.txt
 
 580 bytes of CODE memory (+ 578 bytes shared)
 638 bytes of DATA memory

Errors: none
Warnings: 3
